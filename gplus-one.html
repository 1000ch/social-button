<script src="//apis.google.com/js/plusone.js" async></script>

<script>
  window.GooglePlusOne = (function () {

    const currentScript = document.currentScript;
    const ownerDocument = currentScript.ownerDocument;
    const GooglePlusOnePrototype = Object.create(HTMLElement.prototype);

    Object.defineProperty(GooglePlusOnePrototype, 'width', {
      configurable: false,
      enumerable: false,
      get: function () {
        return this.getAttribute('width') || 300;
      },
      set: function (newValue) {
        this.setAttribute('width', newValue);
      }
    });

    Object.defineProperty(GooglePlusOnePrototype, 'height', {
      configurable: false,
      enumerable: false,
      get: function () {
        return this.getAttribute('height') || 20;
      },
      set: function (newValue) {
        this.setAttribute('height', newValue);
      }
    });

    Object.defineProperty(GooglePlusOnePrototype, 'annotation', {
      configurable: false,
      enumerable: false,
      get: function () {
        return this.getAttribute('annotation') || 'bubble';
      },
      set: function (newValue) {
        this.setAttribute('annotation', newValue);
      }
    });

    Object.defineProperty(GooglePlusOnePrototype, 'href', {
      configurable: false,
      enumerable: false,
      get: function () {
        return this.getAttribute('href') || '';
      },
      set: function (newValue) {
        this.setAttribute('href', newValue);
      }
    });

    Object.defineProperty(GooglePlusOnePrototype, 'size', {
      configurable: false,
      enumerable: false,
      get: function () {
        return this.getAttribute('size') || 'standard';
      },
      set: function (newValue) {
        this.setAttribute('size', newValue);
      }
    });

    GooglePlusOnePrototype.createdCallback = function () {

      const div = document.createElement('div');
      div.className = 'g-plusone';
      div.setAttribute('data-annotation', this.annotation);
      div.setAttribute('data-href', this.href);
      div.setAttribute('data-size', this.size);
      div.setAttribute('data-width', this.width);
      div.setAttribute('data-height', this.height);

      this.appendChild(div);
    };

    GooglePlusOnePrototype.attributeChangedCallback = function (attributeName, oldValue, newValue) {
      const div = this.querySelector('div');
      div.setAttribute(`data-${attributeName}`, newValue);
    };

    return document.registerElement('gplus-one', {
      prototype: GooglePlusOnePrototype
    });
  })();
</script>
